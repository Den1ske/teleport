<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Extract tpls - Teleport for MODX</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Extract tpls";
    var mkdocs_page_input_path = "use\\extract\\tpl.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Teleport for MODX</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../../..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../../contribute/">Contribute</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Extend</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../extend/custom-actions/">Custom Actions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../extend/custom-extract-tpls/">Custom Extract tpls</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Install</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../../install/git-clone/">Teleport Source Installation via _Git Clone_</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../install/phar/">Teleport Phar Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../../install/releases/">Teleport Source Installation via _Releases_</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Use</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Extract</a>
                </li>
                <li class="">
                    
    <a class="" href="../../inject/">Inject</a>
                </li>
                <li class="">
                    
    <a class="" href="../../profile/">Profile</a>
                </li>
                <li class="">
                    
    <a class="" href="../../push/">Push</a>
                </li>
                <li class="">
                    
    <a class="" href="../../server/">Teleport HTTP Server</a>
                </li>
                <li class="">
                    
    <a class="" href="../../user-create/">UserCreate</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Extract</span>
    <ul class="subnav">
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Extract tpls</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#extract-tpls">Extract tpls</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#the-properties-of-an-extract-tpl">The properties of an Extract tpl</a></li>
        
            <li><a class="toctree-l5" href="#included-tpls">Included tpls</a></li>
        
            <li><a class="toctree-l5" href="#custom-tpls">Custom tpls</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="toctree-l3">
                    
    <span class="caption-text">Tpl</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="resource_children/">resource_children.tpl.json</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Packages</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../packages/gc/">Packages/GC</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Workspace</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../workspace/gc/">Workspace/GC</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Teleport for MODX</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Extract &raquo;</li>
        
      
        
          <li>Use &raquo;</li>
        
      
    
    <li>Extract tpls</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/modxcms/teleport/edit/master/docs/use/extract/tpl.md"> Edit on modxcms/teleport</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="extract-tpls">Extract tpls</h1>
<p>Extract tpls are JSON templates defining what, when, and how various objects, scripts, or file artifacts are to be extracted and packaged into a Teleport transport package.</p>
<h2 id="the-properties-of-an-extract-tpl">The properties of an Extract tpl</h2>
<p>Each Extract tpl defines the attributes and vehicles that make up the manifest of a Teleport transport package. The manifest defines what is packaged and in what order.</p>
<h3 id="name">name</h3>
<p>Every tpl has a name property which helps identify the tpl used to create a transport package. This name is included in the generated package filename.</p>
<h3 id="attributes">attributes</h3>
<p>The attributes of a Teleport transport package can be set to make distributable packages that can be installed from within the MODX package management interface. You can set readme, changelog, and license attributes, as well as the <code>requires</code> attribute supported in MODX &gt;=2.4 to specify package dependencies.</p>
<p>Note that you can also define an attribute as an object with the properties <code>sourceType</code> and <code>source</code>. For now, <code>fileContent</code> is the only supported <code>sourceType</code>, which uses the <code>source</code> attribute value as a file path or stream URL from which to read the value of the attribute.</p>
<pre><code>"attributes": {
    "changelog": {
        "sourceType": "fileContent",
        "source": "{+properties.modx.core_path}components/test/changelog.txt"
    },
    "requires": {
        "collections": "~3.0"
    }
}
</code></pre>
<p>This makes it possible to use Teleport to create Extras packages that are ready to install from within MODX. Care will just need to be taken not to use any Teleport-specific <code>vehicle</code> classes in the packages created for this purpose.</p>
<h3 id="vehicles">vehicles</h3>
<p>Teleport transport vehicles define artifacts that are to be packaged when the tpl is used in an Extract action. They can be core xPDOVehicle classes or they can be Teleport-specific or even custom implementations which extend any of the core xPDOVehicle classes.</p>
<p>For example, the following defines a single vehicle that packages files from a specified source into a specified target:</p>
<pre><code>"vehicles": [
    {
        "vehicle_class": "xPDOFileVehicle",
        "object": {
            "source": "{+properties.modx.core_path}components/test",
            "target": "return MODX_CORE_PATH . 'components';"
        },
        "attributes": {"vehicle_class": "xPDOFileVehicle"}
    }
]
</code></pre>
<p>Or here is a more complex definition that packages all system and context settings from the MODX database:</p>
<pre><code>"vehicles": [
    {
        "vehicle_class": "xPDOObjectVehicle",
        "object": {
            "class": "modSystemSetting",
            "criteria": [
                "1 = 1"
            ],
            "package": "modx"
        },
        "attributes": {
            "preserve_keys": true,
            "update_object": true
        }
    },
    {
        "vehicle_class": "xPDOObjectVehicle",
        "object": {
            "class": "modContextSetting",
            "criteria": [
                "1 = 1"
            ],
            "package": "modx"
        },
        "attributes": {
            "preserve_keys": true,
            "update_object": true
        }
    }
]
</code></pre>
<h2 id="included-tpls">Included tpls</h2>
<ul>
<li><code>changeset.tpl.json</code> - Extract a defined set of changes being recorded by callback functions in the MODX configuration.</li>
<li><code>complete.tpl.json</code> - Extract all core objects, files, and custom database tables from a MODX deployment for replacing an entire deployment.</li>
<li><code>complete_db.tpl.json</code> - Extract all core objects and custom database tables from a MODX deployment.</li>
<li><code>develop.tpl.json</code> - Extract all core objects, files, and custom database tables from a MODX deployment to inject into another deployment, supplementing existing objects and custom tables.</li>
<li><code>elements.tpl.json</code> - Extract all Elements and related data from a MODX deployment to inject into another deployment, updating and supplementing existing Elements.</li>
<li><code>packages.tpl.json</code> - Extract all Packages registered in a MODX deployment to inject into another deployment.</li>
<li><code>promote.tpl.json</code> - Extract core objects, files, and custom database tables except settings from a MODX deployment to inject into another deployment.</li>
<li><a href="resource_children/"><code>resource_children.tpl.json</code></a> - Extract all Resources that are children of a specified parent Resource.</li>
<li><code>resources.tpl.json</code> - Extract all Resources from a MODX deployment to inject into another deployment, updating and supplementing existing Resources.</li>
<li><code>settings.tpl.json</code> - Extract all Settings from a MODX deployment to inject into another deployment, updating and supplementing existing Settings.</li>
<li><code>user.tpl.json</code> - Extract a single User and related data from a MODX deployment to inject into another deployment.</li>
<li><code>users.tpl.json</code> - Extract all Users from a MODX deployment to inject into another deployment, updating and supplementing existing Users.</li>
</ul>
<h2 id="custom-tpls">Custom tpls</h2>
<p>You can create and use your own custom tpls with Teleport. See <a href="../../../extend/custom-extract-tpls/">Extending Teleport with Custom Extract Tpls</a> to get started.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resource_children/" class="btn btn-neutral float-right" title="resource_children.tpl.json">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../user-create/" class="btn btn-neutral" title="UserCreate"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../user-create/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="resource_children/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
